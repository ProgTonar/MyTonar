{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/andrey/Projects/MyTonarFront/src/app/dashboard/addnew/client.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useRef } from 'react'\nimport { useRouter } from 'next/navigation'\nimport styles from './edit.module.scss'\nimport Quill from 'quill'\nimport \"quill/dist/quill.snow.css\"\n\n\nconst AddNews = () => {\n  const router = useRouter()\n  const editorRef = useRef<HTMLDivElement>(null)\n  const quillRef = useRef<any>(null)\n  const [isLoading, setIsLoading] = useState(false)\n  const [formData, setFormData] = useState({\n    title: '',\n    subtitle: '',\n    content: '',\n    description: '',\n    date: new Date().toISOString().split('T')[0], // Текущая дата по умолчанию\n    image_url: ''\n  })\n\n  useEffect(() => {\n    if (editorRef.current && !quillRef.current) {\n      const toolbarOptions = [\n        ['bold', 'italic', 'underline', 'strike'],\n        ['blockquote', 'code-block'],\n        [{ 'list': 'ordered'}, { 'list': 'bullet' }],\n        [{ 'script': 'sub'}, { 'script': 'super' }],\n        [{ 'indent': '-1'}, { 'indent': '+1' }],\n        [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\n        [{ 'color': [] }, { 'background': [] }],\n        [{ 'font': [] }],\n        [{ 'align': [] }],\n        ['clean']\n      ];\n\n      quillRef.current = new Quill(editorRef.current, {\n        modules: {\n          toolbar: toolbarOptions\n        },\n        theme: 'snow'\n      });\n\n      quillRef.current.on('text-change', () => {\n        if (quillRef.current) {\n          setFormData(prev => ({\n            ...prev,\n            content: quillRef.current?.root.innerHTML || ''\n          }))\n        }\n      })\n    }\n\n    return () => {\n      if (quillRef.current) {\n        quillRef.current = null\n      }\n    }\n  }, [])\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target\n    setFormData(prev => ({ ...prev, [name]: value }))\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setIsLoading(true)\n    \n    try {\n      const token = localStorage.getItem('access_token')\n      const response = await fetch(`http://localhost:9091/api/news`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          title_one: formData.title,\n          title_two: formData.subtitle,\n          content: formData.content,\n          description: formData.description,\n          date: formData.date,\n          image_url: formData.image_url\n        })\n      })\n\n      if (!response.ok) throw new Error('Ошибка создания новости')\n      router.push('/dashboard/news')\n    } catch (error) {\n      console.error('Ошибка:', error)\n      alert('Не удалось создать новость')\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className={styles.container}>\n      <h1 className={styles.title}>Добавить новость</h1>\n      \n      <form onSubmit={handleSubmit} className={styles.form}>\n        <div className={styles.formGroup}>\n          <label className={styles.label}>Заголовок</label>\n          <input\n            type=\"text\"\n            name=\"title\"\n            value={formData.title}\n            onChange={handleInputChange}\n            className={styles.input}\n            required\n          />\n        </div>\n\n        <div className={styles.formGroup}>\n          <label className={styles.label}>Подзаголовок</label>\n          <input\n            type=\"text\"\n            name=\"subtitle\"\n            value={formData.subtitle}\n            onChange={handleInputChange}\n            className={styles.input}\n          />\n        </div>\n\n        <div className={styles.formGroup}>\n          <label className={styles.label}>Краткое описание</label>\n          <input\n            type=\"text\"\n            name=\"description\"\n            value={formData.description}\n            onChange={handleInputChange}\n            className={styles.input}\n            required\n          />\n        </div>\n\n        <div className={styles.formGroup}>\n          <label className={styles.label}>Дата</label>\n          <input\n            type=\"date\"\n            name=\"date\"\n            value={formData.date}\n            onChange={handleInputChange}\n            className={styles.input}\n            required\n          />\n        </div>\n\n        <div className={styles.formGroup}>\n          <label className={styles.label}>Содержание</label>\n          <div className={styles.editor}>\n            <div ref={editorRef}></div>\n          </div>\n        </div>\n\n        <div className={styles.formGroup}>\n          <label className={styles.label}>Ссылка на изображение</label>\n          <input\n            type=\"text\"\n            name=\"image_url\"\n            value={formData.image_url}\n            onChange={handleInputChange}\n            className={styles.input}\n          />\n        </div>\n\n        <div className={styles.buttonGroup}>\n          <button\n            type=\"submit\"\n            disabled={isLoading}\n            className={styles.submitButton}\n          >\n            {isLoading ? 'Создание...' : 'Создать новость'}\n          </button>\n          \n          <button\n            type=\"button\"\n            onClick={() => router.push('/dashboard/news')}\n            className={styles.cancelButton}\n          >\n            Отмена\n          </button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default AddNews"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 401, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}