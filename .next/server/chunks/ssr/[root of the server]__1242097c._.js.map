{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/dashboard/permission/role.module.scss.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"accessDenied\": \"role-module-scss-module__-4oGMG__accessDenied\",\n  \"accessInfo\": \"role-module-scss-module__-4oGMG__accessInfo\",\n  \"actionButton\": \"role-module-scss-module__-4oGMG__actionButton\",\n  \"actionsCell\": \"role-module-scss-module__-4oGMG__actionsCell\",\n  \"addButton\": \"role-module-scss-module__-4oGMG__addButton\",\n  \"adminActions\": \"role-module-scss-module__-4oGMG__adminActions\",\n  \"container\": \"role-module-scss-module__-4oGMG__container\",\n  \"deleteButton\": \"role-module-scss-module__-4oGMG__deleteButton\",\n  \"errorContainer\": \"role-module-scss-module__-4oGMG__errorContainer\",\n  \"loading\": \"role-module-scss-module__-4oGMG__loading\",\n  \"noData\": \"role-module-scss-module__-4oGMG__noData\",\n  \"noPermissions\": \"role-module-scss-module__-4oGMG__noPermissions\",\n  \"permissionTag\": \"role-module-scss-module__-4oGMG__permissionTag\",\n  \"permissionsContainer\": \"role-module-scss-module__-4oGMG__permissionsContainer\",\n  \"permissionsList\": \"role-module-scss-module__-4oGMG__permissionsList\",\n  \"roleBadge\": \"role-module-scss-module__-4oGMG__roleBadge\",\n  \"roleNameCell\": \"role-module-scss-module__-4oGMG__roleNameCell\",\n  \"table\": \"role-module-scss-module__-4oGMG__table\",\n  \"tableContainer\": \"role-module-scss-module__-4oGMG__tableContainer\",\n  \"tableRow\": \"role-module-scss-module__-4oGMG__tableRow\",\n  \"title\": \"role-module-scss-module__-4oGMG__title\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 35, "column": 0}, "map": {"version":3,"sources":["file:///home/andrey/Projects/MyTonarFront/src/hooks/useUserPermissions.ts"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\n\ninterface UserPermissionsState {\n  isLoading: boolean;\n  hasAccess: boolean;\n  message: string | null;\n}\n\nexport function useUserPermissions(resource: string): UserPermissionsState {\n  const [state, setState] = useState<UserPermissionsState>({\n    isLoading: true,\n    hasAccess: false,\n    message: null\n  });\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n    \n    const checkPermissions = async () => {\n      try {\n        const token = localStorage.getItem('access_token');\n        \n        if (!token) {\n          setState({\n            isLoading: false,\n            hasAccess: false,\n            message: 'Необходима авторизация'\n          });\n          return;\n        }\n        \n        // Запрос к API сервера для проверки прав доступа\n        const response = await axios.get(\n          `http://localhost:9091/api/${resource}`, \n          {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          }\n        );\n        \n        if (response.data && response.data.message === \"У пользователя не хватает прав доступа\") {\n          setState({\n            isLoading: false,\n            hasAccess: false,\n            message: response.data.message\n          });\n        } else {\n          setState({\n            isLoading: false,\n            hasAccess: true,\n            message: null\n          });\n        }\n        \n      } catch (error) {\n        console.error('Ошибка при проверке прав доступа:', error);\n        \n        if (axios.isAxiosError(error) && error.response?.data?.message) {\n          setState({\n            isLoading: false,\n            hasAccess: false,\n            message: error.response.data.message\n          });\n        } else {\n          setState({\n            isLoading: false,\n            hasAccess: false,\n            message: error instanceof Error ? error.message : 'Произошла ошибка при проверке прав'\n          });\n        }\n      }\n    };\n\n    checkPermissions();\n  }, [resource]);\n\n  return state;\n} "],"names":[],"mappings":";;;AAEA;AAFA;;;AAWO,SAAS,mBAAmB,QAAgB;IACjD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAwB;QACvD,WAAW;QACX,WAAW;QACX,SAAS;IACX;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,wCAAmC;;QAEnC,MAAM;IAyDR,GAAG;QAAC;KAAS;IAEb,OAAO;AACT","debugId":null}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"sources":["file:///home/andrey/Projects/MyTonarFront/src/services/getPermission.ts"],"sourcesContent":["import {  IPermission } from '@/type/Types'\nimport axios from 'axios'\n\nexport async function getPermissions(): Promise<IPermission[]> {\n\ttry {\n        const token = localStorage.getItem('access_token');\n        \n        if (!token) {\n          throw new Error('Токен авторизации не найден');\n        }\n        \n        const response = await axios.get(`http://localhost:9091/api/permissions`, {\n            headers: {\n                'Authorization': `Bearer ${token}`,\n                'Content-Type': 'application/json'\n              },\n              withCredentials: true\n        });\n\n        console.log(response.data.permissions)\n        \n        return response.data.permissions;\n      } catch (error) {\n        console.error('Ошибка при получении списка разрешений', error);\n        return [];\n      }\n}"],"names":[],"mappings":";;;AACA;;AAEO,eAAe;IACrB,IAAI;QACG,MAAM,QAAQ,aAAa,OAAO,CAAC;QAEnC,IAAI,CAAC,OAAO;YACV,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,WAAW,MAAM,qIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,CAAC,qCAAqC,CAAC,EAAE;YACtE,SAAS;gBACL,iBAAiB,CAAC,OAAO,EAAE,OAAO;gBAClC,gBAAgB;YAClB;YACA,iBAAiB;QACvB;QAEA,QAAQ,GAAG,CAAC,SAAS,IAAI,CAAC,WAAW;QAErC,OAAO,SAAS,IAAI,CAAC,WAAW;IAClC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0CAA0C;QACxD,OAAO,EAAE;IACX;AACN","debugId":null}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///home/andrey/Projects/MyTonarFront/src/app/dashboard/permission/client.tsx"],"sourcesContent":["'use client'\n\nimport { IPermission} from \"@/type/Types\";\nimport { useEffect, useState } from \"react\";\nimport styles from './role.module.scss';\nimport { useUserPermissions } from \"@/hooks/useUserPermissions\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport 'react-toastify/dist/ReactToastify.css';\nimport { getPermissions } from \"@/services/getPermission\";\n\nexport default function PermissionClient() {\n    const [permissions, settPermissions] = useState<IPermission[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n    \n    const { isLoading, hasAccess, message } = useUserPermissions('roles');\n\n    useEffect(() => {\n        const fetchPermissions = async () => {\n          try {\n            const data = await getPermissions();\n            if (Array.isArray(data)) {\n                settPermissions(data);\n            } else {\n                settPermissions([]);\n              setError('Не хватает прав для просмотра');\n            }\n          } catch (error) {\n            console.error('Ошибка загрузки ролей:', error);\n            setError('Не удалось загрузить роли');\n            settPermissions([]);\n          } finally {\n            setLoading(false);\n          }\n        };\n        \n        fetchPermissions();\n      }, []);\n\n    if (isLoading) {\n        return <div className={styles.loading}>Проверка прав доступа...</div>;\n    }\n\n    if (!hasAccess) {\n        return (\n            <div className={styles.accessDenied}>\n              <h2>Доступ ограничен</h2>\n              <p>{message || 'Просмотр разрешений доступен только администраторам.'}</p>\n              <p className={styles.accessInfo}>Если вам необходим доступ к этому разделу, обратитесь к администратору системы.</p>\n            </div>\n        );\n    }\n\n    return (\n        <div className={styles.container}>\n            <ToastContainer />\n            <h1 className={styles.title}>Разрешения</h1>\n            \n            <div className={styles.adminActions}>\n              <button \n                className={styles.addButton}\n                onClick={() => toast.info('Функция добавления разрешения будет доступна в ближайшее время')}\n              >\n                Добавить разрешение\n              </button>\n            </div>\n            \n            <div className={styles.tableContainer}>\n                {permissions.length > 0 ? (\n                  <table className={styles.table}>\n                      <thead>\n                          <tr>\n                              <th>Название разрешения</th>\n                              \n                              <th>Действия</th>\n                          </tr>\n                      </thead>\n                      <tbody>\n                          {permissions.map((permission, index) => (\n                              <tr key={index} className={styles.tableRow}>\n                                  <td className={styles.roleNameCell}>\n                                      <span className={styles.roleBadge}>{permission.name || 'Без названия'}</span>\n                                  </td>\n                                  <td>\n                                      \n                                  </td>\n                                  <td className={styles.actionsCell}>\n                                      <button className={styles.actionButton}>\n                                          Редактировать\n                                      </button>\n                                      <button className={`${styles.actionButton} ${styles.deleteButton}`}>\n                                          Удалить\n                                      </button>\n                                  </td>\n                              </tr>\n                          ))}\n                      </tbody>\n                  </table>\n                ) : (\n                  <div className={styles.noData}>Нет данных о разрешениях</div>\n                )}\n            </div>\n        </div>\n    );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 417, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}