{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/dashboard/news/News.module.scss.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"Image\": \"News-module-scss-module__ZrtHMq__Image\",\n  \"actionButton\": \"News-module-scss-module__ZrtHMq__actionButton\",\n  \"actionsCell\": \"News-module-scss-module__ZrtHMq__actionsCell\",\n  \"addButton\": \"News-module-scss-module__ZrtHMq__addButton\",\n  \"adminActions\": \"News-module-scss-module__ZrtHMq__adminActions\",\n  \"adminNotice\": \"News-module-scss-module__ZrtHMq__adminNotice\",\n  \"background__section\": \"News-module-scss-module__ZrtHMq__background__section\",\n  \"button-13-medium\": \"News-module-scss-module__ZrtHMq__button-13-medium\",\n  \"button-14-medium\": \"News-module-scss-module__ZrtHMq__button-14-medium\",\n  \"button-14-regular\": \"News-module-scss-module__ZrtHMq__button-14-regular\",\n  \"button-16-medium\": \"News-module-scss-module__ZrtHMq__button-16-medium\",\n  \"container\": \"News-module-scss-module__ZrtHMq__container\",\n  \"content\": \"News-module-scss-module__ZrtHMq__content\",\n  \"dateCell\": \"News-module-scss-module__ZrtHMq__dateCell\",\n  \"deleteButton\": \"News-module-scss-module__ZrtHMq__deleteButton\",\n  \"description\": \"News-module-scss-module__ZrtHMq__description\",\n  \"description-11-medium\": \"News-module-scss-module__ZrtHMq__description-11-medium\",\n  \"description-13-regular\": \"News-module-scss-module__ZrtHMq__description-13-regular\",\n  \"descriptionCell\": \"News-module-scss-module__ZrtHMq__descriptionCell\",\n  \"download-footer-13\": \"News-module-scss-module__ZrtHMq__download-footer-13\",\n  \"head-1\": \"News-module-scss-module__ZrtHMq__head-1\",\n  \"imageCell\": \"News-module-scss-module__ZrtHMq__imageCell\",\n  \"newBlock\": \"News-module-scss-module__ZrtHMq__newBlock\",\n  \"new__content\": \"News-module-scss-module__ZrtHMq__new__content\",\n  \"new__image\": \"News-module-scss-module__ZrtHMq__new__image\",\n  \"newsImage\": \"News-module-scss-module__ZrtHMq__newsImage\",\n  \"news__content\": \"News-module-scss-module__ZrtHMq__news__content\",\n  \"news__text\": \"News-module-scss-module__ZrtHMq__news__text\",\n  \"pagination-16-regular\": \"News-module-scss-module__ZrtHMq__pagination-16-regular\",\n  \"plates-14-medium\": \"News-module-scss-module__ZrtHMq__plates-14-medium\",\n  \"plates-14-regular\": \"News-module-scss-module__ZrtHMq__plates-14-regular\",\n  \"portals__header\": \"News-module-scss-module__ZrtHMq__portals__header\",\n  \"portals__title\": \"News-module-scss-module__ZrtHMq__portals__title\",\n  \"section\": \"News-module-scss-module__ZrtHMq__section\",\n  \"section__date\": \"News-module-scss-module__ZrtHMq__section__date\",\n  \"section__description\": \"News-module-scss-module__ZrtHMq__section__description\",\n  \"section__title\": \"News-module-scss-module__ZrtHMq__section__title\",\n  \"subtitle\": \"News-module-scss-module__ZrtHMq__subtitle\",\n  \"table\": \"News-module-scss-module__ZrtHMq__table\",\n  \"table-header-18\": \"News-module-scss-module__ZrtHMq__table-header-18\",\n  \"table-header-20\": \"News-module-scss-module__ZrtHMq__table-header-20\",\n  \"tableContainer\": \"News-module-scss-module__ZrtHMq__tableContainer\",\n  \"tableRow\": \"News-module-scss-module__ZrtHMq__tableRow\",\n  \"text\": \"News-module-scss-module__ZrtHMq__text\",\n  \"text-2\": \"News-module-scss-module__ZrtHMq__text-2\",\n  \"title\": \"News-module-scss-module__ZrtHMq__title\",\n  \"title-1\": \"News-module-scss-module__ZrtHMq__title-1\",\n  \"title-2\": \"News-module-scss-module__ZrtHMq__title-2\",\n  \"title-3\": \"News-module-scss-module__ZrtHMq__title-3\",\n  \"title-4\": \"News-module-scss-module__ZrtHMq__title-4\",\n  \"title-5\": \"News-module-scss-module__ZrtHMq__title-5\",\n  \"title-6\": \"News-module-scss-module__ZrtHMq__title-6\",\n  \"titleCell\": \"News-module-scss-module__ZrtHMq__titleCell\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///home/andrey/Projects/MyTonarFront/src/hooks/useUserPermissions.ts"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\n\ninterface UserPermissionsState {\n  isLoading: boolean;\n  hasAccess: boolean;\n  message: string | null;\n}\n\nexport function useUserPermissions(resource: string): UserPermissionsState {\n  const [state, setState] = useState<UserPermissionsState>({\n    isLoading: true,\n    hasAccess: false,\n    message: null\n  });\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n    \n    const checkPermissions = async () => {\n      try {\n        const token = localStorage.getItem('access_token');\n        \n        if (!token) {\n          setState({\n            isLoading: false,\n            hasAccess: false,\n            message: 'Необходима авторизация'\n          });\n          return;\n        }\n        \n        // Запрос к API сервера для проверки прав доступа\n        const response = await axios.get(\n          `http://localhost:9091/api/${resource}`, \n          {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          }\n        );\n        \n        if (response.data && response.data.message === \"У пользователя не хватает прав доступа\") {\n          setState({\n            isLoading: false,\n            hasAccess: false,\n            message: response.data.message\n          });\n        } else {\n          setState({\n            isLoading: false,\n            hasAccess: true,\n            message: null\n          });\n        }\n        \n      } catch (error) {\n        console.error('Ошибка при проверке прав доступа:', error);\n        \n        if (axios.isAxiosError(error) && error.response?.data?.message) {\n          setState({\n            isLoading: false,\n            hasAccess: false,\n            message: error.response.data.message\n          });\n        } else {\n          setState({\n            isLoading: false,\n            hasAccess: false,\n            message: error instanceof Error ? error.message : 'Произошла ошибка при проверке прав'\n          });\n        }\n      }\n    };\n\n    checkPermissions();\n  }, [resource]);\n\n  return state;\n} "],"names":[],"mappings":";;;AAEA;AAFA;;;AAWO,SAAS,mBAAmB,QAAgB;IACjD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAwB;QACvD,WAAW;QACX,WAAW;QACX,SAAS;IACX;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,wCAAmC;;QAEnC,MAAM;IAyDR,GAAG;QAAC;KAAS;IAEb,OAAO;AACT","debugId":null}},
    {"offset": {"line": 177, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 183, "column": 0}, "map": {"version":3,"sources":["file:///home/andrey/Projects/MyTonarFront/src/app/dashboard/news/client.tsx"],"sourcesContent":["'use client'\n\nimport { INews } from \"@/type/Types\";\nimport styles from './News.module.scss'\nimport { useRouter } from \"next/navigation\";\nimport { format, parse } from \"date-fns\";\nimport { ru } from \"date-fns/locale\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport 'react-toastify/dist/ReactToastify.css';\nimport { useNewsPermissions } from \"@/hooks/useNewsPermissions\";\nimport axios from \"axios\";\nimport { useUserPermissions } from \"@/hooks/useUserPermissions\";\n\ninterface NewsProps {\n  news: INews[];\n}\n\nconst NewsDashboardClient = ({ news }: NewsProps) => {\n  const router = useRouter();\n  const { isLoading, hasAccess, message } = useUserPermissions('news');\n\n  const formatDate = (dateString: string) => {\n    const date = parse(dateString, \"dd MMMM yyyy\", new Date());\n    return format(date, \"dd MMMM yyyy\", { locale: ru });\n  };\n\n  const handleDeleteClick = async (id: number, event?: React.MouseEvent) => {\n    event?.stopPropagation();\n    \n   \n  \n    try {\n      const response = await axios.delete(`http://localhost:9092/api/news/delete_detail`, {\n        data: { id }\n      });\n      \n      if (response.status === 200) {\n        toast.success('Новость успешно удалена');\n        router.refresh();\n      }\n    } catch (error) {\n      if (axios.isAxiosError(error)) {\n        toast.error(error.response?.data?.message || 'Ошибка при удалении новости');\n      } else {\n        toast.error('Произошла непредвиденная ошибка');\n        console.error('Delete error:', error);\n      }\n    }\n  };\n\n  const handleNewsClick = (id: number) => {\n    router.push(`/dashboard/news/${id}`, { scroll: false });\n  };\n\n\n  const truncateText = (text: string, maxLength: number) => {\n    if (!text) return '';\n    if (text.length <= maxLength) return text;\n    return text.slice(0, maxLength) + '...';\n  };\n\n  if (isLoading) {\n    return <div className={styles.loading}>Проверка прав доступа...</div>;\n  }\n\n  if (!hasAccess) {\n    return (\n      <div className={styles.accessDenied}>\n        <h2>Доступ ограничен</h2>\n        <p>{message || 'Управление новостями доступно только администраторам и редакторам.'}</p>\n        <p className={styles.accessInfo}>Если вам необходим доступ к этому разделу, обратитесь к администратору системы.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.container}>\n      <ToastContainer />\n      <h1 className={styles.title}>Управление новостями</h1>\n      \n      <div className={styles.adminActions}>\n        <button \n          className={styles.addButton}\n          onClick={() => router.push('/dashboard/addnew')}\n        >\n          Добавить новость\n        </button>\n      </div>\n      \n      <div className={styles.tableContainer}>\n        <table className={styles.table}>\n          <thead>\n            <tr>\n              <th>Изображение</th>\n              <th>Заголовок</th>\n              <th>Подзаголовок</th>\n              <th>Описание</th>\n              <th>Контент</th>\n              <th>Дата</th>\n              <th>Действия</th>\n            </tr>\n          </thead>\n          <tbody>\n            {news.map((newsItem) => (\n              <tr key={newsItem.id} className={styles.tableRow}>\n                <td className={styles.imageCell}>\n                  <div \n                    className={styles.newsImage}\n                    style={{\n                      backgroundImage: `url(${newsItem.image_url})`,\n                    }}\n                  />\n                </td>\n                <td className={styles.titleCell}>\n                  {truncateText(newsItem.title_one, 50)}\n                </td>\n                <td className={styles.titleCell}>\n                  {truncateText(newsItem.title_two, 50)}\n                </td>\n                <td className={styles.descriptionCell}>\n                  {truncateText(newsItem.description, 50)}\n                </td>\n                <td className={styles.descriptionCell}>\n                  {truncateText(newsItem.content, 50)}\n                </td>\n                <td className={styles.dateCell}>\n                  {formatDate(newsItem.date)}\n                </td>\n                <td className={styles.actionsCell}>\n                  <button \n                    className={styles.actionButton}\n                    onClick={() => handleNewsClick(newsItem.id)}\n                  >\n                    Редактировать\n                  </button>\n                  <button \n                    className={`${styles.actionButton} ${styles.deleteButton}`}\n                    onClick={(e) => handleDeleteClick(newsItem.id)}\n                  >\n                    Удалить\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\nexport default NewsDashboardClient;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 506, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}