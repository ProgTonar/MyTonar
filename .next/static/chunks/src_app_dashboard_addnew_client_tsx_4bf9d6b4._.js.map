{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/andrey/Projects/MyTonarFront/src/app/dashboard/addnew/client.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useRef } from 'react'\nimport { useRouter } from 'next/navigation'\nimport styles from './edit.module.scss'\nimport Quill from 'quill'\nimport \"quill/dist/quill.snow.css\"\n\n\nconst AddNews = () => {\n  const router = useRouter()\n  const editorRef = useRef<HTMLDivElement>(null)\n  const quillRef = useRef<any>(null)\n  const [isLoading, setIsLoading] = useState(false)\n  const [formData, setFormData] = useState({\n    title: '',\n    subtitle: '',\n    content: '',\n    description: '',\n    date: new Date().toISOString().split('T')[0], // Текущая дата по умолчанию\n    image_url: ''\n  })\n\n  useEffect(() => {\n    if (editorRef.current && !quillRef.current) {\n      const toolbarOptions = [\n        ['bold', 'italic', 'underline', 'strike'],\n        ['blockquote', 'code-block'],\n        [{ 'list': 'ordered'}, { 'list': 'bullet' }],\n        [{ 'script': 'sub'}, { 'script': 'super' }],\n        [{ 'indent': '-1'}, { 'indent': '+1' }],\n        [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\n        [{ 'color': [] }, { 'background': [] }],\n        [{ 'font': [] }],\n        [{ 'align': [] }],\n        ['clean']\n      ];\n\n      quillRef.current = new Quill(editorRef.current, {\n        modules: {\n          toolbar: toolbarOptions\n        },\n        theme: 'snow'\n      });\n\n      quillRef.current.on('text-change', () => {\n        if (quillRef.current) {\n          setFormData(prev => ({\n            ...prev,\n            content: quillRef.current?.root.innerHTML || ''\n          }))\n        }\n      })\n    }\n\n    return () => {\n      if (quillRef.current) {\n        quillRef.current = null\n      }\n    }\n  }, [])\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target\n    setFormData(prev => ({ ...prev, [name]: value }))\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setIsLoading(true)\n    \n    try {\n      const token = localStorage.getItem('access_token')\n      const response = await fetch(`http://localhost:9091/api/news`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          title_one: formData.title,\n          title_two: formData.subtitle,\n          content: formData.content,\n          description: formData.description,\n          date: formData.date,\n          image_url: formData.image_url\n        })\n      })\n\n      if (!response.ok) throw new Error('Ошибка создания новости')\n      router.push('/dashboard/news')\n    } catch (error) {\n      console.error('Ошибка:', error)\n      alert('Не удалось создать новость')\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <div className={styles.container}>\n      <h1 className={styles.title}>Добавить новость</h1>\n      \n      <form onSubmit={handleSubmit} className={styles.form}>\n        <div className={styles.formGroup}>\n          <label className={styles.label}>Заголовок</label>\n          <input\n            type=\"text\"\n            name=\"title\"\n            value={formData.title}\n            onChange={handleInputChange}\n            className={styles.input}\n            required\n          />\n        </div>\n\n        <div className={styles.formGroup}>\n          <label className={styles.label}>Подзаголовок</label>\n          <input\n            type=\"text\"\n            name=\"subtitle\"\n            value={formData.subtitle}\n            onChange={handleInputChange}\n            className={styles.input}\n          />\n        </div>\n\n        <div className={styles.formGroup}>\n          <label className={styles.label}>Краткое описание</label>\n          <input\n            type=\"text\"\n            name=\"description\"\n            value={formData.description}\n            onChange={handleInputChange}\n            className={styles.input}\n            required\n          />\n        </div>\n\n        <div className={styles.formGroup}>\n          <label className={styles.label}>Дата</label>\n          <input\n            type=\"date\"\n            name=\"date\"\n            value={formData.date}\n            onChange={handleInputChange}\n            className={styles.input}\n            required\n          />\n        </div>\n\n        <div className={styles.formGroup}>\n          <label className={styles.label}>Содержание</label>\n          <div className={styles.editor}>\n            <div ref={editorRef}></div>\n          </div>\n        </div>\n\n        <div className={styles.formGroup}>\n          <label className={styles.label}>Ссылка на изображение</label>\n          <input\n            type=\"text\"\n            name=\"image_url\"\n            value={formData.image_url}\n            onChange={handleInputChange}\n            className={styles.input}\n          />\n        </div>\n\n        <div className={styles.buttonGroup}>\n          <button\n            type=\"submit\"\n            disabled={isLoading}\n            className={styles.submitButton}\n          >\n            {isLoading ? 'Создание...' : 'Создать новость'}\n          </button>\n          \n          <button\n            type=\"button\"\n            onClick={() => router.push('/dashboard/news')}\n            className={styles.cancelButton}\n          >\n            Отмена\n          </button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default AddNews"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 422, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}