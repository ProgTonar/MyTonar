{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/andrey/Projects/MyTonarFront/src/services/getUser.ts"],"sourcesContent":["import {  IUser } from '@/type/Types'\nimport axios from 'axios'\n\nexport async function getUser(): Promise<IUser[]> {\n\ttry {\n        const token = localStorage.getItem('access_token');\n        \n        if (!token) {\n          throw new Error('Токен авторизации не найден');\n        }\n        \n        const response = await axios.get(`http://localhost:9091/api/users`, {\n            headers: {\n                'Authorization': `Bearer ${token}`,\n                'Content-Type': 'application/json'\n              },\n              withCredentials: true\n        });\n        \n        return response.data.users;\n      } catch (error) {\n        console.error('Ошибка при получении списка пользователей:', error);\n        return [];\n      }\n}"],"names":[],"mappings":";;;AACA;;AAEO,eAAe;IACrB,IAAI;QACG,MAAM,QAAQ,aAAa,OAAO,CAAC;QAEnC,IAAI,CAAC,OAAO;YACV,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,WAAW,MAAM,wIAAA,CAAA,UAAK,CAAC,GAAG,CAAC,CAAC,+BAA+B,CAAC,EAAE;YAChE,SAAS;gBACL,iBAAiB,CAAC,OAAO,EAAE,OAAO;gBAClC,gBAAgB;YAClB;YACA,iBAAiB;QACvB;QAEA,OAAO,SAAS,IAAI,CAAC,KAAK;IAC5B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8CAA8C;QAC5D,OAAO,EAAE;IACX;AACN","debugId":null}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/dashboard/users/users.module.scss.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"accessDenied\": \"users-module-scss-module__YoBSZG__accessDenied\",\n  \"accessInfo\": \"users-module-scss-module__YoBSZG__accessInfo\",\n  \"actionButton\": \"users-module-scss-module__YoBSZG__actionButton\",\n  \"actions\": \"users-module-scss-module__YoBSZG__actions\",\n  \"addButton\": \"users-module-scss-module__YoBSZG__addButton\",\n  \"adminActions\": \"users-module-scss-module__YoBSZG__adminActions\",\n  \"container\": \"users-module-scss-module__YoBSZG__container\",\n  \"deleteButton\": \"users-module-scss-module__YoBSZG__deleteButton\",\n  \"errorContainer\": \"users-module-scss-module__YoBSZG__errorContainer\",\n  \"loading\": \"users-module-scss-module__YoBSZG__loading\",\n  \"noData\": \"users-module-scss-module__YoBSZG__noData\",\n  \"noPermissions\": \"users-module-scss-module__YoBSZG__noPermissions\",\n  \"permissionTag\": \"users-module-scss-module__YoBSZG__permissionTag\",\n  \"permissionsList\": \"users-module-scss-module__YoBSZG__permissionsList\",\n  \"roleTag\": \"users-module-scss-module__YoBSZG__roleTag\",\n  \"table\": \"users-module-scss-module__YoBSZG__table\",\n  \"tableContainer\": \"users-module-scss-module__YoBSZG__tableContainer\",\n  \"tableRow\": \"users-module-scss-module__YoBSZG__tableRow\",\n  \"title\": \"users-module-scss-module__YoBSZG__title\",\n  \"userAvatar\": \"users-module-scss-module__YoBSZG__userAvatar\",\n  \"userCell\": \"users-module-scss-module__YoBSZG__userCell\",\n  \"userInfo\": \"users-module-scss-module__YoBSZG__userInfo\",\n  \"userLogin\": \"users-module-scss-module__YoBSZG__userLogin\",\n  \"userName\": \"users-module-scss-module__YoBSZG__userName\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///home/andrey/Projects/MyTonarFront/src/hooks/useUserPermissions.ts"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\n\ninterface UserPermissionsState {\n  isLoading: boolean;\n  hasAccess: boolean;\n  message: string | null;\n}\n\nexport function useUserPermissions(resource: string): UserPermissionsState {\n  const [state, setState] = useState<UserPermissionsState>({\n    isLoading: true,\n    hasAccess: false,\n    message: null\n  });\n\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n    \n    const checkPermissions = async () => {\n      try {\n        const token = localStorage.getItem('access_token');\n        \n        if (!token) {\n          setState({\n            isLoading: false,\n            hasAccess: false,\n            message: 'Необходима авторизация'\n          });\n          return;\n        }\n        \n        // Запрос к API сервера для проверки прав доступа\n        const response = await axios.get(\n          `http://localhost:9091/api/${resource}`, \n          {\n            headers: {\n              'Authorization': `Bearer ${token}`\n            }\n          }\n        );\n        \n        if (response.data && response.data.message === \"У пользователя не хватает прав доступа\") {\n          setState({\n            isLoading: false,\n            hasAccess: false,\n            message: response.data.message\n          });\n        } else {\n          setState({\n            isLoading: false,\n            hasAccess: true,\n            message: null\n          });\n        }\n        \n      } catch (error) {\n        console.error('Ошибка при проверке прав доступа:', error);\n        \n        if (axios.isAxiosError(error) && error.response?.data?.message) {\n          setState({\n            isLoading: false,\n            hasAccess: false,\n            message: error.response.data.message\n          });\n        } else {\n          setState({\n            isLoading: false,\n            hasAccess: false,\n            message: error instanceof Error ? error.message : 'Произошла ошибка при проверке прав'\n          });\n        }\n      }\n    };\n\n    checkPermissions();\n  }, [resource]);\n\n  return state;\n} "],"names":[],"mappings":";;;AAEA;AACA;;AAHA;;;AAWO,SAAS,mBAAmB,QAAgB;;IACjD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAwB;QACvD,WAAW;QACX,WAAW;QACX,SAAS;IACX;IAEA,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;wCAAE;YACR,uCAAmC;;YAAM;YAEzC,MAAM;iEAAmB;oBACvB,IAAI;wBACF,MAAM,QAAQ,aAAa,OAAO,CAAC;wBAEnC,IAAI,CAAC,OAAO;4BACV,SAAS;gCACP,WAAW;gCACX,WAAW;gCACX,SAAS;4BACX;4BACA;wBACF;wBAEA,iDAAiD;wBACjD,MAAM,WAAW,MAAM,wIAAA,CAAA,UAAK,CAAC,GAAG,CAC9B,CAAC,0BAA0B,EAAE,UAAU,EACvC;4BACE,SAAS;gCACP,iBAAiB,CAAC,OAAO,EAAE,OAAO;4BACpC;wBACF;wBAGF,IAAI,SAAS,IAAI,IAAI,SAAS,IAAI,CAAC,OAAO,KAAK,0CAA0C;4BACvF,SAAS;gCACP,WAAW;gCACX,WAAW;gCACX,SAAS,SAAS,IAAI,CAAC,OAAO;4BAChC;wBACF,OAAO;4BACL,SAAS;gCACP,WAAW;gCACX,WAAW;gCACX,SAAS;4BACX;wBACF;oBAEF,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,qCAAqC;wBAEnD,IAAI,wIAAA,CAAA,UAAK,CAAC,YAAY,CAAC,UAAU,MAAM,QAAQ,EAAE,MAAM,SAAS;4BAC9D,SAAS;gCACP,WAAW;gCACX,WAAW;gCACX,SAAS,MAAM,QAAQ,CAAC,IAAI,CAAC,OAAO;4BACtC;wBACF,OAAO;4BACL,SAAS;gCACP,WAAW;gCACX,WAAW;gCACX,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;4BACpD;wBACF;oBACF;gBACF;;YAEA;QACF;uCAAG;QAAC;KAAS;IAEb,OAAO;AACT;GAtEgB","debugId":null}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file:///home/andrey/Projects/MyTonarFront/src/app/dashboard/users/client.tsx"],"sourcesContent":["'use client'\n\nimport { getUser } from \"@/services/getUser\";\nimport { IUser } from \"@/type/Types\";\nimport { useEffect, useState } from \"react\";\nimport styles from './users.module.scss';\nimport { useUserPermissions } from \"@/hooks/useUserPermissions\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport default function UserClient() {\n  const [users, setUsers] = useState<IUser[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  const { isLoading, hasAccess, message } = useUserPermissions('users');\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const data = await getUser();\n        // Проверяем, что data - это массив\n        if (Array.isArray(data)) {\n          setUsers(data);\n        } else {\n          setUsers([]);\n          setError('Получены некорректные данные пользователей');\n        }\n      } catch (error) {\n        console.error('Ошибка загрузки пользователей:', error);\n        setError('Не удалось загрузить пользователей');\n        setUsers([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchUsers();\n  }, []);\n\n  if (isLoading) {\n    return <div className={styles.loading}>Проверка прав доступа...</div>;\n  }\n\n  if (!hasAccess) {\n    return (\n      <div className={styles.accessDenied}>\n        <h2>Доступ ограничен</h2>\n        <p>{message || 'Просмотр списка пользователей доступен только администраторам.'}</p>\n        <p className={styles.accessInfo}>Если вам необходим доступ к этому разделу, обратитесь к администратору системы.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.container}>\n      <ToastContainer />\n      <h1 className={styles.title}>Пользователи</h1>\n      \n      <div className={styles.tableContainer}>\n        {users.length > 0 ? (\n          <table className={styles.table}>\n            <thead>\n              <tr>\n                <th>Пользователь</th>\n                <th>Email</th>\n                <th>Роль</th>\n                <th>Разрешения</th>\n                <th>Действия</th>\n              </tr>\n            </thead>\n            <tbody>\n              {users.map((user, index) => (\n                <tr key={index} className={styles.tableRow}>\n                  <td>\n                    <div className={styles.userCell}>\n                      <div className={styles.userAvatar}>\n                        {(user.first_name?.[0] || user.login?.[0] || '?').toUpperCase()}\n                      </div>\n                      <div className={styles.userInfo}>\n                        <div className={styles.userName}>{user.first_name || user.login || 'Неизвестно'}</div>\n                        {user.login && <div className={styles.userLogin}>{user.login}</div>}\n                      </div>\n                    </div>\n                  </td>\n                  <td>{user.email || 'Не указан'}</td>\n                  <td>\n                    <span className={styles.roleTag}>\n                      {user.roles && user.roles.length > 0 ? user.roles[0] : 'Пользователь'}\n                    </span>\n                  </td>\n                  <td>\n                    <div className={styles.permissionsList}>\n                      {user.permissions && Array.isArray(user.permissions) && user.permissions.length > 0 ? (\n                        user.permissions.map((permission, index) => (\n                          <span key={index} className={styles.permissionTag}>\n                            {permission}\n                          </span>\n                        ))\n                      ) : (\n                        <span className={styles.noPermissions}>Нет разрешений</span>\n                      )}\n                    </div>\n                  </td>\n                  <td>\n                    <div className={styles.actions}>\n                      <button className={styles.actionButton}>\n                        Редактировать\n                      </button>\n                      <button className={styles.deleteButton}>\n                        Удалить\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        ) : (\n          <div className={styles.noData}>Нет данных о пользователях</div>\n        )}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 499, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}