{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/dashboard/news/News.module.scss.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"Image\": \"News-module-scss-module__ZrtHMq__Image\",\n  \"actionButton\": \"News-module-scss-module__ZrtHMq__actionButton\",\n  \"actionsCell\": \"News-module-scss-module__ZrtHMq__actionsCell\",\n  \"addButton\": \"News-module-scss-module__ZrtHMq__addButton\",\n  \"adminActions\": \"News-module-scss-module__ZrtHMq__adminActions\",\n  \"adminNotice\": \"News-module-scss-module__ZrtHMq__adminNotice\",\n  \"background__section\": \"News-module-scss-module__ZrtHMq__background__section\",\n  \"button-13-medium\": \"News-module-scss-module__ZrtHMq__button-13-medium\",\n  \"button-14-medium\": \"News-module-scss-module__ZrtHMq__button-14-medium\",\n  \"button-14-regular\": \"News-module-scss-module__ZrtHMq__button-14-regular\",\n  \"button-16-medium\": \"News-module-scss-module__ZrtHMq__button-16-medium\",\n  \"container\": \"News-module-scss-module__ZrtHMq__container\",\n  \"content\": \"News-module-scss-module__ZrtHMq__content\",\n  \"dateCell\": \"News-module-scss-module__ZrtHMq__dateCell\",\n  \"deleteButton\": \"News-module-scss-module__ZrtHMq__deleteButton\",\n  \"description\": \"News-module-scss-module__ZrtHMq__description\",\n  \"description-11-medium\": \"News-module-scss-module__ZrtHMq__description-11-medium\",\n  \"description-13-regular\": \"News-module-scss-module__ZrtHMq__description-13-regular\",\n  \"descriptionCell\": \"News-module-scss-module__ZrtHMq__descriptionCell\",\n  \"download-footer-13\": \"News-module-scss-module__ZrtHMq__download-footer-13\",\n  \"head-1\": \"News-module-scss-module__ZrtHMq__head-1\",\n  \"imageCell\": \"News-module-scss-module__ZrtHMq__imageCell\",\n  \"newBlock\": \"News-module-scss-module__ZrtHMq__newBlock\",\n  \"new__content\": \"News-module-scss-module__ZrtHMq__new__content\",\n  \"new__image\": \"News-module-scss-module__ZrtHMq__new__image\",\n  \"newsImage\": \"News-module-scss-module__ZrtHMq__newsImage\",\n  \"news__content\": \"News-module-scss-module__ZrtHMq__news__content\",\n  \"news__text\": \"News-module-scss-module__ZrtHMq__news__text\",\n  \"pagination-16-regular\": \"News-module-scss-module__ZrtHMq__pagination-16-regular\",\n  \"plates-14-medium\": \"News-module-scss-module__ZrtHMq__plates-14-medium\",\n  \"plates-14-regular\": \"News-module-scss-module__ZrtHMq__plates-14-regular\",\n  \"portals__header\": \"News-module-scss-module__ZrtHMq__portals__header\",\n  \"portals__title\": \"News-module-scss-module__ZrtHMq__portals__title\",\n  \"section\": \"News-module-scss-module__ZrtHMq__section\",\n  \"section__date\": \"News-module-scss-module__ZrtHMq__section__date\",\n  \"section__description\": \"News-module-scss-module__ZrtHMq__section__description\",\n  \"section__title\": \"News-module-scss-module__ZrtHMq__section__title\",\n  \"subtitle\": \"News-module-scss-module__ZrtHMq__subtitle\",\n  \"table\": \"News-module-scss-module__ZrtHMq__table\",\n  \"table-header-18\": \"News-module-scss-module__ZrtHMq__table-header-18\",\n  \"table-header-20\": \"News-module-scss-module__ZrtHMq__table-header-20\",\n  \"tableContainer\": \"News-module-scss-module__ZrtHMq__tableContainer\",\n  \"tableRow\": \"News-module-scss-module__ZrtHMq__tableRow\",\n  \"text\": \"News-module-scss-module__ZrtHMq__text\",\n  \"text-2\": \"News-module-scss-module__ZrtHMq__text-2\",\n  \"title\": \"News-module-scss-module__ZrtHMq__title\",\n  \"title-1\": \"News-module-scss-module__ZrtHMq__title-1\",\n  \"title-2\": \"News-module-scss-module__ZrtHMq__title-2\",\n  \"title-3\": \"News-module-scss-module__ZrtHMq__title-3\",\n  \"title-4\": \"News-module-scss-module__ZrtHMq__title-4\",\n  \"title-5\": \"News-module-scss-module__ZrtHMq__title-5\",\n  \"title-6\": \"News-module-scss-module__ZrtHMq__title-6\",\n  \"titleCell\": \"News-module-scss-module__ZrtHMq__titleCell\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///home/andrey/Projects/MyTonarFront/src/app/dashboard/news/client.tsx"],"sourcesContent":["'use client'\n\nimport { INews } from \"@/type/Types\";\nimport styles from './News.module.scss'\nimport { useRouter } from \"next/navigation\";\nimport { format, parse } from \"date-fns\";\nimport { ru } from \"date-fns/locale\";\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { toast, ToastContainer } from \"react-toastify\";\nimport 'react-toastify/dist/ReactToastify.css';\n\ninterface NewsProps {\n  news: INews[];\n}\n\nconst NewsDashboardClient = ({ news }: NewsProps) => {\n  const router = useRouter();\n  const [roles, setRoles] = useState<string[]>([]);\n  const [hasAdminAccess, setHasAdminAccess] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  const formatDate = (dateString: string) => {\n    const date = parse(dateString, \"dd MMMM yyyy\", new Date());\n    return format(date, \"dd MMMM yyyy\", { locale: ru });\n  };\n\n  useEffect(() => {\n    \n    const getUserRoles = async () => {\n      try {\n        const token = localStorage.getItem('access_token');\n        \n        if (!token) {\n          throw new Error('Токен авторизации не найден');\n        }\n        \n        const response = await axios.post(\n          `http://localhost:9091/api/user/roles-and-permissions`, \n          {}, \n          {\n            headers: {\n              'Authorization': `Bearer ${token}`,\n              'Content-Type': 'application/json'\n            }\n          }\n        );\n        \n        const userRoles = response.data.roles || [];\n        setRoles(userRoles);\n        setHasAdminAccess(userRoles.includes('admin'));\n        \n      } catch (error) {\n        console.error('Ошибка при получении ролей и разрешений:', error);\n        setRoles([]);\n        setHasAdminAccess(false);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    getUserRoles();\n  }, []);\n\n  const handleNewsClick = (id: number) => {\n    if (hasAdminAccess) {\n      router.push(`/dashboard/news/${id}`, { scroll: false })\n    } else {\n      toast.error('У вас нет прав администратора для редактирования новостей');\n    }\n  };\n\n  const truncateText = (text: string, maxLength: number) => {\n    if (!text) return '';\n    if (text.length <= maxLength) return text;\n    return text.slice(0, maxLength) + '...';\n  };\n\n  return (\n    <div className={styles.container}>\n      <ToastContainer />\n      <h1 className={styles.title}>Управление новостями</h1>\n      \n      {hasAdminAccess && (\n        <div className={styles.adminActions}>\n          <button \n            className={styles.addButton}\n            onClick={() => router.push('/dashboard/addnew')}\n          >\n            Добавить новость\n          </button>\n        </div>\n      )}\n      \n      <div className={styles.tableContainer}>\n        <table className={styles.table}>\n          <thead>\n            <tr>\n              <th>Изображение</th>\n              <th>Заголовок</th>\n              <th>Подзаголовок</th>\n              <th>Описание</th>\n              <th>Контент</th>\n              <th>Дата</th>\n              <th>Действия</th>\n            </tr>\n          </thead>\n          <tbody>\n            {news.map((newsItem) => (\n              <tr key={newsItem.id} className={styles.tableRow}>\n                <td className={styles.imageCell}>\n                  <div \n                    className={styles.newsImage}\n                    style={{\n                      backgroundImage: `url(${newsItem.image_url})`,\n                    }}\n                  />\n                </td>\n                <td className={styles.titleCell}>\n                  {truncateText(newsItem.title_one, 50)}\n                </td>\n                <td className={styles.titleCell}>\n                  {truncateText(newsItem.title_two, 50)}\n                </td>\n                <td className={styles.descriptionCell}>\n                  {truncateText(newsItem.description, 50)}\n                </td>\n                <td className={styles.descriptionCell}>\n                  {truncateText(newsItem.content, 50)}\n                </td>\n                <td className={styles.dateCell}>\n                  {formatDate(newsItem.date)}\n                </td>\n                <td className={styles.actionsCell}>\n                  <button \n                    className={styles.actionButton}\n                    onClick={() => handleNewsClick(newsItem.id)}\n                    disabled={!hasAdminAccess}\n                  >\n                    Редактировать\n                  </button>\n                  {hasAdminAccess && (\n                    <button className={`${styles.actionButton} ${styles.deleteButton}`}>\n                      Удалить\n                    </button>\n                  )}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n\nexport default NewsDashboardClient;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 375, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}